*** Settings ***
Documentation     Test suite for MD-SAL LACP  mininet OF13
Suite Setup       Start Suite
Suite Teardown    Stop Suite
Library     SSHLibrary

*** Variables ***
${start}=   sudo mn --custom LACP_custom1.py --switch ovsk,protocols=OpenFlow13 
${bond}=     "/etc/modprobe.d/bonding.conf"

** Keywords ***
Start Suite  
    Log    Start mininet
    Open Connection   ${MININET}     prompt=>
    Login With Public Key    ${MININET_USER}   ${USER_HOME}/.ssh/id_rsa   any 
    Sleep    5
    Write    sudo ovs-vsctl set-manager ptcp:6633
    Write    sudo mn -c
    Sleep    2
    Write    rm -rf ${bond} 
    Sleep    2
    Write    cp bonding.conf ${bond}
    Sleep    2
    Write    sed -i -- 's/CONTROLLER/${CONTROLLER}/g' LACP_custom1.py
    Sleep    2
    Write    ${start}
    Sleep    30
    Read
Stop Suite
    Log    Stop mininet
    Read
    Write    exit 
    Sleep    4
    Write    sed -i -- 's/${CONTROLLER}/CONTROLLER/g' LACP_custom1.py
    Sleep    2
    Write    rm -rf ${bond}
    Sleep    2 
    Read 
    Close Connection 
